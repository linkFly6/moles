<!DOCTYPE html>
<html ng-app="app">
<head>
    <title>moles - 前端桌面集成工具</title>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link href="../src/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="../src/css/main.css" rel="stylesheet">
    <script src="../src/javascripts/jquery.min.js"></script>
    <script src="../src/bootstrap/js/bootstrap.min.js"></script>
    <!--<script src="../src/vue/vue.js"></script>-->
    <!--<script src="../src/vue/vue-router.js"></script>-->
    <script src="../src/javascripts/angularJS.js"></script>
    <script src="../src/javascripts/angular-route.min.js"></script>
</head>
<body>
    <div id="app">
        <nav class="navbar navbar-default nav-box">
            <div class="container-fluid">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <span class="navbar-brand" title="moles">
                        <img alt="moles" src="../src/resource/logo.png" height="20" width="20">
                    </span>
                </div>
                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <ul class="nav navbar-nav">
                        <li class="active"><a href="javascript:;">首页</a></li>
                        <li class="dropdown">
                            <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">编译 <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="javascript:;">快速编译ES6(2015)</a></li>
                                <li><a href="javascript:;">配置编译ES6(2015)</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="javascript:;">快速编译Sass</a></li>
                                <li><a href="javascript:;">配置编译Sass</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">压缩 <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="#/simCom">快速压缩(js/css)</a></li>
                                <li><a href="javascript:;">配置压缩(js/css)</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">任务 <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="javascript:;">任务概况</a></li>
                                <li><a href="javascript:;">任务列表</a></li>
                            </ul>
                        </li>
                    </ul>
                    <!--<form class="navbar-form navbar-left" role="search">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search">
                        </div>
                        <button type="submit" class="btn btn-default">Submit</button>
                    </form>-->
                    <ul class="nav navbar-nav navbar-right">
                        <li class="dropdown">
                            <a href="javascritp:;" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">设置 <span class="caret"></span></a>
                            <ul class="dropdown-menu">
                                <li><a href="javascript:;">选项</a></li>
                                <li><a href="javascript:;">插件</a></li>
                                <li><a href="javascript:;">检查更新</a></li>
                                <li role="separator" class="divider"></li>
                                <li><a href="javascript:;">关于</a></li>
                            </ul>
                        </li>
                    </ul>
                </div><!-- /.navbar-collapse -->
            </div><!-- /.container-fluid -->
        </nav>
        <section id="content">
            <ng-view></ng-view>
        </section>
        <footer></footer>
    </div>
    <script>

        (function () {
            'use strict';
            var app = angular.module('app', ['ngRoute']),
                ipcRenderer = require('electron').ipcRenderer;
            app.controller('simple-Compressor-ctr', ['$scope', '$timeout', function ($scope, $timeout) {
                $scope.oldCodeSource = $scope.newCodeSource = '';
                $scope.compressor = function () {
                    var oldValue = $scope.oldCodeSource.trim();
                    if (oldValue.length) {
                        ipcRenderer.send('async-compressor', oldValue);
                    }
                }
                //压缩完成
                ipcRenderer.on('async-compressor-reply', function (event, value) {
                    if (value != null) {
                        $scope.$apply(function () {
                            $scope.newCodeSource = value;
                        });
                    }
                });
            }]);
            app.config(function ($routeProvider, $locationProvider) {
                $routeProvider.when('/', {
                    template: "<h2>这个是默认的模板哦</h2>"
                }).when('/simCom', {
                    templateUrl: 'quickcompress.html',
                    controller: 'simple-Compressor-ctr'
                }).otherwise('/');//默认路由
            });
        })();

    </script>
</body>

</html>